{% load static %}
{% load payment_request_tags %}
<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <meta name="description" content="">
    <meta name="author" content="">
    <title>{% block title %} {% endblock title %} | Zrupee CMS</title>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/pretty-checkbox@3.0/dist/pretty-checkbox.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">


    <!-- Bootstrap core CSS -->

    {% if user.is_authenticated %}
        <link href="{% static 'css/app/main.css' %}" rel="stylesheet">
        <link href="{% static 'css/app/for_navbar.css' %}" rel="stylesheet">
        <link href="{% static 'css/app/for_merchants.css' %}" rel="stylesheet">
        <link href="{% static 'css/app/for_commissions.css' %}" rel="stylesheet">

    {% else %}
        <link href="{% static 'css/app/login.css' %}" rel="stylesheet">
    {% endif %}

    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <link href="{% static 'css/app/select2.min.css' %}" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/js/select2.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gijgo/1.7.2/combined/js/gijgo.min.js" type="text/javascript"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/gijgo/1.7.2/combined/css/gijgo.min.css" rel="stylesheet" type="text/css" />

</head>

<body id="page-top">

{% if user.is_authenticated %}

    <!-- Navigation /starts -->
    <nav id="mainNav" class="navbar static-top navbar-toggleable-md navbar-inverse bg-inverse" style="height: 50px;">
        <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse"
                data-target="#navbarExample" aria-controls="navbarExample"
                aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <a class="navbar-brand" href="/">Zrupee</a>
        <div class="collapse navbar-collapse" id="navbarExample">
            <ul class="sidebar-nav navbar-nav">
                {% if request.user.is_superuser or request.user.zr_admin_user.role.name == "ADMINSTAFF"%}
                <li class="nav-item {% if url_name == 'distributor-list' %}active{% endif %}">
                     <a class="nav-link text-right" href="{% url 'user:distributor-list' %}">Distributors</a>
                 </li>
                {% endif %}

                {% if request.user.is_superuser or request.user.zr_admin_user.role.name == "ADMINSTAFF" or request.user.zr_admin_user.role.name == "DISTRIBUTOR" %}
                 <li class="nav-item {% if url_name == 'sub-distributor-list' %}active{% endif %}">
                     <a class="nav-link text-right" href="{% url 'user:sub-distributor-list' %}">Sub-Distributors</a>
                 </li>
                {% endif %}

                {% if request.user.is_superuser or request.user.zr_admin_user.role.name == "ADMINSTAFF" or request.user.zr_admin_user.role.name == "DISTRIBUTOR" %}
                <li class="nav-item {% if url_name == 'merchant-list' %}active{% endif %}">
                     <a class="nav-link text-right" href="{% url 'user:merchant-list' %}">Merchants</a>
                </li>
                {% endif %}

                {% if request.user.zr_admin_user.role.name != "RETAILER" %}
                <li class="nav-item {% if url_name == 'transaction-list' %}active{% endif %}">
                    <a class="nav-link text-right" href="{% url 'transaction:transaction-list' %}">Transactions</a>
                </li>
                <li class="nav-item {% if url_name == 'payment-request-list' %}active{% endif %}" style="position:relative;">
                    <a class="nav-link text-right" href="{% url 'payment-requests:payment-request-list' %}">Payment Requests</a>
                    <span class="badge badge-pill badge-outline">{{ request|payment_req_cnt }}</span></a>
                </li>
                <li class="nav-item {% if url_name == 'payment-request-sent-view' %}active{% endif %}">
                    <a class="nav-link text-right " href="{% url 'payment-requests:payment-request-sent-view' %}">Payment request sent</a>
                </li>

                <li class="nav-item" id="wallet-list">
                    <a class="nav-link text-right " href="{% url 'user:wallet-list' %}">Wallets</a>
                </li>
                {% endif %}

                {% if request.user.is_superuser or request.user.zr_admin_user.role.name == "DISTRIBUTOR" or request.user.zr_admin_user.role.name == "SUBDISTRIBUTOR" %}
                <li class="nav-item {% if url_name == 'display-commission' %}active{% endif %}">
                    <a class="nav-link text-right " href="{% url 'commission:display-commission' %}">Commissions</a>
                </li>
                {% endif %}

                {% if request.user.is_superuser or request.user.zr_admin_user.role.name == "ADMINSTAFF"%}
                <li class="nav-item {% if url_name == 'payment-list' %}active{% endif %}">
                    <a class="nav-link text-right" href="{% url 'payment-requests:payment-list' %}">Payments</a>
                </li>
                {% endif %}

                {% if request.user.is_superuser or request.user.zr_admin_user.role.name == "ADMINSTAFF" or request.user.zr_admin_user.role.name == "DISTRIBUTOR" or request.user.zr_admin_user.role.name == "SUBDISTRIBUTOR" %}
                <li class="nav-item {% if url_name == 'passbook-list' %}active{% endif %}">
                    <a class="nav-link text-right" href="{% url 'wallet:passbook-list' %}">Passbook</a>
                </li>
                <li class="nav-item {% if url_name == 'wallet-list' %}active{% endif %}">
                    <a class="nav-link text-right " href="{% url 'user:wallet-list' %}">Wallets</a>
                </li>
                {% endif %}

                {% if request.user.zr_admin_user.role.name == "CHECKER" or request.user.is_superuser or request.user.zr_admin_user.role.name == "ADMINSTAFF" %}
                <li class="nav-item {% if url_name == 'kyc-requests' %}active{% endif %}">
                    <a class="nav-link text-right" href="{% url 'user:kyc-requests' %}">KYC Requests</a>
                </li>
                {% endif %}

                {% if request.user.zr_admin_user.role.name != "RETAILER" and zr_user.role.name != "TERMINAL" and request.user.zr_admin_user.role.name != "DISTRIBUTOR" and request.user.zr_admin_user.role.name != "SUBDISTRIBUTOR"%}
                <li class="nav-item">
                    <a class="nav-link text-right" style="font-size:20px; margin-right:0px;" href="#">Loyalty - </a>
                </li>
                {% endif %}

                {% if request.user.is_superuser or request.user.zr_admin_user.role.name == "ADMINSTAFF" %}
                <li class="nav-item {% if url_name == 'retailer-list' %}active{% endif %}">
                     <a class="nav-link text-right" href="{% url 'user:retailer-list' %}">Retailers</a>
                </li>
                {% endif %}

                {% if request.user.is_superuser or request.user.zr_admin_user.role.name == "ADMINSTAFF" or request.user.zr_admin_user.role.name == "RETAILER" and zr_user.role.name != "TERMINAL" %}
                <li class="nav-item {% if url_name == 'terminal-list' %}active{% endif %}">
                     <a class="nav-link text-right" href="{% url 'user:terminal-list' %}">Terminals</a>
                </li>
                {% endif %}
                {% if request.user.zr_admin_user.role.name == "RETAILER" and zr_user.role.name != "TERMINAL"%}
                <li class="nav-item {% if url_name == 'loyaltycard-list' %}active{% endif %}">
                     <a class="nav-link text-right" href="{% url 'user:loyaltycard-list' %}">Loyalty Cards</a>
                </li>
                {% endif %}
                {% if zr_user.role.name == "TERMINAL" %}
                <li class="nav-item {% if url_name == 'generate-otp' %}active{% endif %}">
                     <a class="nav-link text-right" href='{% url "user:generate-otp" pk=zr_user.id %}'>GenerateOTP</a>
                </li>
                <li class="nav-item {% if url_name == 'issue-mobile' %}active{% endif %}">
                    <a class="nav-link text-right" href='{% url "user:issue-mobile" pk=zr_user.id %}'>Issue to Mobile No</a>
                </li>
                <li class="nav-item {% if url_name == 'activate-card' %}active{% endif %}">
                    <a class="nav-link text-right" href='{% url "user:activate-card" pk=zr_user.id %}'>Activate</a>
                </li>
                <li class="nav-item {% if url_name == 'recharge-card' %}active{% endif %}">
                    <a class="nav-link text-right" href='{% url "user:recharge-card" pk=zr_user.id %}'>Recharge</a>
                </li>
                <li class="nav-item {% if url_name == 'pay' %}active{% endif %}">
                    <a class="nav-link text-right" href='{% url "user:pay" pk=zr_user.id %}'>Pay</a>
                </li>
                <li class="nav-item {% if url_name == 'deactivate-card' %}active{% endif %}">
                    <a class="nav-link text-right" href='{% url "user:deactivate-card" pk=zr_user.id %}'>Deactivate</a>
                </li>
                <li class="nav-item {% if url_name == 'payment-history' %}active{% endif %}">
                    <a class="nav-link text-right" href="{% url 'user:payment-history' pk=zr_user.id %}">Payment History</a>
                </li>
                <li class="nav-item {% if url_name == 'activatedcard-list' %}active{% endif %}">
                    <a class="nav-link text-right" href="{% url 'user:activatedcard-list' pk=zr_user.id %}">Activated Loyalty Cards</a>
                </li>
                <br><br><br><br><br><br>
                <li class="nav-item ">
                    <a class="nav-link text-right" href="{% url 'user:dashboard' %}">Back to Retailer</a>
                </li>
                {% endif %}

                {% if request.user.is_superuser or request.user.zr_admin_user.role.name == "ADMINSTAFF" or request.user.zr_admin_user.role.name == "RETAILER" and zr_user.role.name != "TERMINAL" %}
                <li class="nav-item {% if url_name == 'offer-list' %}active{% endif %}">
                    <a class="nav-link text-right" href="{% url 'user:offer-list' %}">Offers</a>
                </li>
                <li class="nav-item {% if url_name == 'payment-history' %}active{% endif %}">
                    <a class="nav-link text-right" href="{% url 'user:payment-history' pk=0 %}">Payment History</a>
                </li>
                {% endif %}
                <li class="nav-item">
                    <a class="nav-link text-right"></a>
                </li>
{#                <li class="nav-item">#}
{#                    <a class="nav-link text-right" href="#">Settings</a>#}
{#                </li>#}

            </ul>
            <ul class="navbar-nav">
                {% if zr_user.role.name != "TERMINAL" %}
                <li class="nav-item"><a class="nav-link wheatTextColor headerTextName">{{ request.user.username.upper }} - {{ request.user.zr_admin_user.role.name }}
                </a>
                </li>
                {% else %}
                <li class="nav-item"><a class="nav-link wheatTextColor headerTextName">TERMINAL - {{ zr_user.first_name.upper }}</a>
                </li>
                {% endif %}
            </ul>

            <ul class="navbar-nav ml-auto">
                {% if request.user.is_superuser or request.user.zr_admin_user.role.name == "ADMINSTAFF" or request.user.zr_admin_user.role.name == "DISTRIBUTOR" or request.user.zr_admin_user.role.name == "SUBDISTRIBUTOR" and zr_user.role.name != "TERMINAL" %}
                <li class="nav-item leftMargin headerText">
                        <a class="nav-link wheatTextColor" href="{% url 'user:dashboard' %}">Dashboard</a>
                </li>
                {% endif %}

                {% if request.user.zr_admin_user.role.name == "DISTRIBUTOR" or request.user.zr_admin_user.role.name == "SUBDISTRIBUTOR" %}
                <li class="nav-item leftMargin headerText">
                    <a class="nav-link wheatTextColor" href="{% url 'user:merchant-create' %}">Add Merchant</a>
                </li>
                {% endif %}

                {% if request.user.zr_admin_user.role.name == "RETAILER" and zr_user.role.name != "TERMINAL" %}
                <li class="nav-item leftMargin headerText">
                    <a class="nav-link wheatTextColor" href="{% url 'user:card-create' %}">Add Cards</a>
                </li>
                <li class="nav-item leftMargin headerText">
                    <a class="nav-link wheatTextColor" href="{% url 'user:terminal-create' %}">Add Terminal</a>
                </li>
                {% endif %}

                {% if request.user.zr_admin_user.role.name == "DISTRIBUTOR" %}
                <li class="nav-item leftMargin headerText">
                    <a class="nav-link wheatTextColor" href="{% url 'user:sub-distributor-create' %}">Add Sub-distributor</a>
                </li>
                {% endif %}

                {% if request.user.is_superuser or request.user.zr_admin_user.role.name == "ADMINSTAFF" %}
                <li class="nav-item leftMargin headerText">
                    <a class="nav-link wheatTextColor" href="{% url 'user:offer-create' %}">Create Offers</a>
                </li>
                <li class="nav-item leftMargin headerText">
                    <a class="nav-link wheatTextColor" href="{% url 'user:distributor-create' %}">Add Distributor</a>
                </li>
                <li class="nav-item leftMargin headerText">
                    <a class="nav-link wheatTextColor" href="{% url 'user:retailer-create' %}">Add Retailer</a>
                </li>
                {% endif %}
                <li class="nav-item leftMargin headerText">
                    <a class="nav-link redTextColor" href="{% url 'logout' %}">Logout</a>
                </li>
            </ul>
        </div>
    </nav>
    <!-- Navigation /ends -->

<script type="text/javascript">
$(document).ready(function(){
    $("#{{request.resolver_match.url_name}}").addClass('active');
});
</script>

{% else %}
    {% block logincontent %}

    {% endblock %}

{% endif %}

{% block content %}

{% endblock %}
{% block extrascripts %}

{% endblock extrascripts %}
</body>

</html>
